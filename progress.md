# みちしるべ開発進捗

## 現在の状況（2025-07-23）

### ✅ 完了した作業

#### 1. spec-driven developmentによる設計
- **要件定義**: 手続きの視覚化とドメイン知識の提供に焦点
- **設計書**: Flutter + Supabaseアーキテクチャ
- **実装計画**: 3週間のフェーズ別計画

#### 2. Flutterプロジェクト初期化
- Flutter Web専用プロジェクトとして作成
- 必要なパッケージをインストール済み：
  - supabase_flutter: バックエンド連携
  - flutter_riverpod: 状態管理
  - go_router: ルーティング
  - google_fonts: 日本語フォント

#### 3. 基本UI実装
- **手続き一覧画面**: 5つのライフステージをカード形式で表示
  - 入院準備
  - 介護申請
  - 施設選び
  - 看取り準備
  - 相続手続き
- **テーマ設定**: 高齢者向けの大きな文字（18px基準）
- **レスポンシブ対応**: スマホ・タブレット・PCに対応

#### 4. 手続きデータの網羅的な整理（NEW!）
- **記事から30件以上の手続きを抽出**
  - 実体験に基づく詳細な手続き情報
  - 「同意書50枚問題」「病院からの非同期電話」など実態を反映
- **3つのJSONファイルを作成**
  - `procedures_master.json`: 全手続きの詳細データ
  - `life_stages.json`: 5つのライフステージの定義
  - `difficulty_explanations.json`: 難易度要因の説明
- **手続きの難易度要因を体系化**
  - contact_method: 対面/電話/オンライン/郵送/複数
  - 物理的訪問の必要性、複数回訪問、感情的負担、複雑さ
  - よくある失敗パターンと予防策

### 🎯 現在の機能

1. **モックデータによる画面表示**
   - Supabase接続前でも動作確認可能
   - 各ステージの進捗表示（0/4のような形式）

2. **アクセシビリティ対応**
   - 大きな文字サイズ
   - 高コントラストな配色
   - 直感的なアイコン使用

3. **網羅的な手続きデータ**
   - 実際の体験に基づく30件以上の手続き
   - 各手続きの難易度要因を明確化
   - 実践的なヒントと注意点

### 📝 技術的な決定事項

1. **Freezedの使用を見送り**
   - 初期段階では複雑性を避けるため、シンプルなモデルクラスを使用
   - 後で必要に応じて導入可能

2. **ディレクトリ構造**
   ```
   lib/
   ├── features/       # 機能別モジュール
   ├── core/          # 共通機能
   ├── shared/        # 共有リソース
   └── data/          # JSONデータファイル（NEW!）
   ```

3. **データ構造の設計**
   - 手続きごとに難易度要因を含む詳細情報
   - 依存関係と時系列を考慮
   - 感情的側面への配慮

### 🚀 次のステップ

1. **Supabase設定**（準備待ち）
   - データベーススキーマ作成
   - JSONデータの投入
   - 認証機能の実装
   - RLSポリシー設定

2. **手続き詳細画面**
   - 各手続きの詳細情報表示
   - 難易度の視覚化
   - Todoリストへの変換機能

3. **Todo管理機能**
   - タスクのCRUD操作
   - 進捗管理
   - 家族間でのリアルタイム同期

4. **家族共有機能**
   - 招待リンクによる参加
   - メンバー管理
   - タスク割り当て

### 💡 学んだこと

- **コア機能は「網羅性」**：やることが多すぎて困っている人に、体系的な手続きリストを提供
- **難易度の可視化が重要**：対面/電話/オンラインの違いは手続きの負担に直結
- **実体験の価値**：記事から抽出した「同意書50枚」「印鑑のヒント」などのリアルな情報
- **感情的側面への配慮**：各手続きの精神的負担を認識し、サポート情報を提供

### 🔧 開発環境

- Flutter: 3.32.4
- Dart: SDK付属
- 開発マシン: macOS
- ブラウザ: Safari（web-serverモードで起動）

### 📊 データ統計

- 抽出した手続き数: 30件以上
- カバーするライフステージ: 5つ
- 難易度要因: 4つ（物理的訪問、複数回訪問、感情的負担、複雑さ）
- 手続き方法: 5種類（対面、電話、オンライン、郵送、複数）

### 📌 メモ

- アプリ起動コマンド: `flutter run -d web-server --web-port 8080`
- Supabase環境変数は後で設定予定
- GitHubリポジトリ: https://github.com/DELAxGithub/michishirebe.git
- データファイルはlib/data/に配置済み